set %skrzynia_id DBZMZDE
set %sprzedawca_id EKMJLD

; VLK - piora
set %przedmioty_do_skrzyni VLK_PUD_VRD_EEG_ZUF_YLI_RWF_LNK_HQD_ROF_

; POF - zloto
set %przedmioty_do_sprzedawcy POF_

set %hotkey INSERT
set %wait 10

repeat
  onhotkey %hotkey
    gosub organizer
  sleep 1
until #false

sub organizer

 finditem %sprzedawca_id G_1
 if #FINDCNT > 0
   gosub przeniesPrzedmioty %przedmioty_do_sprzedawcy #BACKPACKID %sprzedawca_id

 finditem %skrzynia_id G_1
 if #FINDCNT > 0
 {
   gosub przeniesPrzedmioty %przedmioty_do_skrzyni #BACKPACKID %skrzynia_id
   wait 2s
 }

return

; przeniesPrzedmioty %przedmioty %z_pojemnika %do_pojemnika
sub przeniesPrzedmioty

  set %przedmioty %1
  set %pojemnikZrodlo %2
  set %pojemnikDocelowy %3

  findItem %przedmioty C_ , %pojemnikZrodlo

  if #FINDCNT > 0
  {
    event exmsg %3 3 30 Przenosze
    
    for #findindex 1 #findcnt
    {
     event exmsg #CHARID 3 30 Findindex: #FINDINDEX z #FINDCNT
     event exmsg #CHARID 3 30 przeniesPrzedmiot #findid %3 #findstack
     gosub przeniesPrzedmiot #findid %pojemnikDocelowy #findstack
    }

    event SysMessage Done!
  }
  else
  {
;    event SysMessage Nic nie przenioslem
  }
return

sub przeniesPrzedmiot
  event exmsg #CHARID 3 30 Co %1 Do %2 Ile %3
  exevent Drag %1 %3
  exevent Dropc %2
  wait 1
return
